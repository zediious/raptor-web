{% load static %}

<div id="registeration_modal">
    <div class="modal fade" id="register_modal"tabindex="-1" aria-labelledby="Create Account" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content bg-dark text-white">
                <button class="btn-close btn-close-white m-3" data-bs-dismiss="modal" aria-label="Close"></button>
                <div class="modal-header">
                    Create Account
                </div>
                <div class="modal-body" id="mod_app_modal_body">

                    <header class="bg-dark text-white p-1">
                        <p class="pageContent">
                            Create a ShadowRaptor account! More functionality will be added 
                            to ShadowRaptor accounts with time.
                        </p>
                        <p class="pageContent">
                            You can either register with the form, or with Discord.
                        </p>
                    </header>
                
                    <section>
                        <div class="p-3 container">
                        <a role="button"
                           href="{% url 'authprofiles:login_oauth' %}"
                           class="btn btn-discord w-100"
                        >
                            Register with Discord
                        </a>
                        </div>         
                    </section>
                    
                    <section>
                        <div class="bg-dark p-3 opacity-75 container">
                            <div id="register_form_replace"
                                 hx-get="{% url 'authprofiles:register' %}"
                                 hx-trigger="load"
                                 hx-target="#register_form_replace"
                                 hx-swap="outerHTML">
                            </div>
                        </div>
                    </section>
                
                </div>
            </div>
        </div>
    </div>
</div>
<div id="reset_password_modal">
    <div class="modal fade" id="resetpass_modal" tabindex="-1" aria-labelledby="Reset Password" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content bg-dark text-white">
                <button class="btn-close btn-close-white m-3" data-bs-dismiss="modal" aria-label="Close"></button>
                <div class="modal-header">
                    Reset Password
                </div>
                <div class="modal-body" id="mod_app_modal_body">

                    <header class="bg-dark text-white p-1">
                        <p class="pageContent">
                            If you have forgotten the password for your account, you can send a
                            password reset link to the email associated with your account here.
                        </p>
                        <p class="pageContent">
                            After clicking "Send Reset Link", wait for confirmation message to appear.
                        </p>
                    </header>

                    <section>
                        {% if messages %}
                        <ul class="messages alert alert-warning">
                        {% for message in messages %}
                            {{message}}
                        {% endfor %}
                        </ul>
                        {% endif %}
                    </section>
                    
                    <section>
                        <div class="bg-dark p-3 opacity-75 container">
                            <div id="reset_password_form_replace"
                                 hx-get="{% url 'authprofiles:reset_password_form' %}"
                                 hx-trigger="load"
                                 hx-target="#reset_password_form_replace"
                                 hx-swap="outerHTML">
                            </div>
                        </div>
                    </section>
                
                </div>
            </div>
        </div>
    </div>
</div>
<div class="float-end">
    <div class="dropstart">
        <button class="btn dropdown-toggle d-flex" type="button" data-bs-toggle="dropdown" aria-expanded="false">
        <div id="profile_picture_box">
            <img id="noProfilePicture" class="border border-secondary border-2 w-100" 
                 src="{% static 'image/no_user.webp' %}"
                 alt="Profile">
        </div>
        </button>
        <ul class="dropdown-menu bg-dark">

        <section class="opacity-75 w-100 container">

            {% if messages %}
            <ul class="messages alert alert-warning">
            {% for message in messages %}
                {{message}}
            {% endfor %}
            </ul>
            {% endif %}

            <div id="user_login_form"
                 hx-get="{% url 'authprofiles:login' %}"
                 hx-trigger="load"
                 hx-target="#user_login_form"
                 hx-swap="outerHTML">
            </div>

            <div class="p-1 mb-0 text-center">
                <p class="pageContent text-white">
                    No Account?
                    <button id="registerModalButton" class="noBackgroundModal btn btn-primary mt-2 mb-0" 
                            data-bs-toggle="modal"
                            data-bs-target="#register_modal"
                    >
                        Register
                    </button>
                </p>
                <p class="pageContent text-white">
                    Forgot Password?
                    <button id="resetpassModalButton" class="noBackgroundModal btn btn-primary mt-2 mb-0 fs-6 p-1 pt-2 pb-2"
                            data-bs-toggle="modal"
                            data-bs-target="#resetpass_modal"
                    >
                        Reset Password
                    </button
                ></p>
            </div>
            
        
        </section>
        
        </ul>
    </div>
</div>
