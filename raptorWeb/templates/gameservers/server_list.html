{% load static %}

<div id="server_button_container">
    {% if page_obj.has_next or page_obj.has_previous%}
        <div class="pagination d-flex align-items-center justify-content-center">
            <span class="step-links">
                {% if page_obj.has_previous %}
                    <a role="button" class="btn btn-dark opacity-75" hx-get="{% url 'gameservers:server_buttons_poll' %}?page=1" hx-target="#server_button_container">&laquo; first</a>
                    <a role="button" class="btn btn-dark opacity" hx-get="{% url 'gameservers:server_buttons_poll' %}?page={{ page_obj.previous_page_number }}" hx-target="#server_button_container">previous</a>
                {% endif %}

                {% if page_obj.has_next %}
                    <a role="button" class="btn btn-dark opacity" hx-get="{% url 'gameservers:server_buttons_poll' %}?page={{ page_obj.next_page_number }}" hx-target="#server_button_container">next</a>
                    <a role="button" class="btn btn-dark opacity" hx-get="{% url 'gameservers:server_buttons_poll' %}?page={{ page_obj.paginator.num_pages }}" hx-target="#server_button_container">last &raquo;</a>
                {% endif %}
            </span>
        </div>
    {% endif %}

    <div class="row">
        {% for server in page_obj %} 
                            
            {% if server_query_enabled %}
            <span id="serverButton" class="fade-in-button col-lg-12 col-6 mt-1"><button class="btn btn-dark fs-4 d-flex mt-2 w-100" data-bs-toggle="modal" data-bs-target="#modal_{{ server.pk }}_Info">
            {% else %}
            <span id="serverButton" class="fade-in-button col-lg-6 col-6 mt-1 w-50"><button class="btn btn-dark fs-4 d-flex mt-2 w-100" data-bs-toggle="modal" data-bs-target="#modal_{{ server.pk }}_Info">
            {% endif %}
                <img class="w-100 fade-in" src="/media/{{server.modpack_picture}}" alt="{{ server.modpack_name }}">
                {% if server_query_enabled %}
                {% if server.in_maintenance %}
                <img class="indicatorImage p-2 fade-in" src="{% static 'image/maintenance_indicator.svg' %}">
                {% else %}
                {% if server.server_state %}
                <img class="indicatorImage p-2 fade-in" src="{% static 'image/online_indicator.svg' %}">
                {% else %}
                <img class="indicatorImage p-2 fade-in" src="{% static 'image/offline_indicator.svg' %}">
                {% endif %}
                {% endif %}
                {% else %}
                {% endif %}
            </button></span>

        {% endfor %}
    </div>
</div>
